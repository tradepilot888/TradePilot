<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>TradePilot</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body>
  <div class="header">
    <h1>üìä TradePilot</h1>
    <select id="assetSelector" onchange="updateChart()">
      {% for asset in assets %}
        <option value="{{ asset.symbol }}">{{ asset.name }}</option>
      {% endfor %}
    </select>
  </div>

  <div class="content">
    <div class="left-panel">
      <h2>üìÅ –†–æ–∑–¥—ñ–ª: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
      <div id="stats">
        <p>–¢—É—Ç –±—É–¥–µ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞ —Å–∏–≥–Ω–∞–ª—ñ–≤ (–¥–æ–¥–∞–º–æ –¥–∞–ª—ñ).</p>
      </div>
    </div>

    <div class="chart-panel">
      <div id="tradingview-widget-container"></div>
    </div>
  </div>

  <script type="text/javascript">
    let selectedSymbol = "{{ assets[0].symbol }}";

    function updateChart() {
      selectedSymbol = document.getElementById('assetSelector').value;
      loadChart(selectedSymbol);
    }

    function loadChart(symbol) {
      document.getElementById('tradingview-widget-container').innerHTML = "";
      new TradingView.widget({
        "width": "100%",
        "height": 600,
        "symbol": symbol,
        "interval": "60",
        "timezone": "Etc/UTC",
        "theme": "light",
        "style": "1",
        "locale": "en",
        "toolbar_bg": "#f1f3f6",
        "enable_publishing": false,
        "allow_symbol_change": true,
        "container_id": "tradingview-widget-container"
      });
    }

    window.onload = function () {
      loadChart(selectedSymbol);
    };
  </script>

  <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
</body>
</html>
